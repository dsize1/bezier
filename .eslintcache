[{"D:\\前端\\react基础架构\\bezier\\src\\index.tsx":"1","D:\\前端\\react基础架构\\bezier\\src\\reportWebVitals.ts":"2","D:\\前端\\react基础架构\\bezier\\src\\App.tsx":"3","D:\\前端\\react基础架构\\bezier\\src\\components\\ControlPoints\\index.tsx":"4","D:\\前端\\react基础架构\\bezier\\src\\models\\controlPoints.ts":"5","D:\\前端\\react基础架构\\bezier\\src\\components\\Stage\\index.tsx":"6","D:\\前端\\react基础架构\\bezier\\src\\utils\\index.ts":"7","D:\\前端\\react基础架构\\bezier\\src\\utils\\toFixed.ts":"8","D:\\前端\\react基础架构\\bezier\\src\\components\\ControlPoints\\InputRange.tsx":"9","D:\\前端\\react基础架构\\bezier\\src\\components\\Stage\\contants.ts":"10","D:\\前端\\react基础架构\\bezier\\src\\components\\Stage\\draws.ts":"11","D:\\前端\\react基础架构\\bezier\\src\\utils\\calculateBezier.ts":"12","D:\\前端\\react基础架构\\bezier\\src\\utils\\getStyleCls.ts":"13","D:\\前端\\react基础架构\\bezier\\src\\models\\controlPlayer.ts":"14","D:\\前端\\react基础架构\\bezier\\src\\utils\\p2CubicBezier.ts":"15","D:\\前端\\react基础架构\\bezier\\src\\components\\Compare\\index.tsx":"16","D:\\前端\\react基础架构\\bezier\\src\\hooks\\useResize.ts":"17","D:\\前端\\react基础架构\\bezier\\src\\hooks\\useMulticast.ts":"18","D:\\前端\\react基础架构\\bezier\\src\\utils\\getMotion$.ts":"19","D:\\前端\\react基础架构\\bezier\\src\\utils\\getCtxByStage.ts":"20","D:\\前端\\react基础架构\\bezier\\src\\utils\\drawPoint.ts":"21","D:\\前端\\react基础架构\\bezier\\src\\components\\Display\\index.tsx":"22","D:\\前端\\react基础架构\\bezier\\src\\Canvas\\index.ts":"23","D:\\前端\\react基础架构\\bezier\\src\\Canvas\\Shape\\Circle.ts":"24","D:\\前端\\react基础架构\\bezier\\src\\Canvas\\Shape\\Rectangle.ts":"25","D:\\前端\\react基础架构\\bezier\\src\\utils\\cubicBezier2p.ts":"26","D:\\前端\\react基础架构\\bezier\\src\\Canvas\\utils\\Movement.ts":"27","D:\\前端\\react基础架构\\bezier\\src\\Canvas\\utils\\getMovements$.ts":"28","D:\\前端\\react基础架构\\bezier\\src\\Canvas\\utils\\getAbsolutePosition.ts":"29"},{"size":500,"mtime":1607750933546,"results":"30","hashOfConfig":"31"},{"size":425,"mtime":1607745288397,"results":"32","hashOfConfig":"31"},{"size":790,"mtime":1608820477824,"results":"33","hashOfConfig":"31"},{"size":6000,"mtime":1610213019139,"results":"34","hashOfConfig":"31"},{"size":635,"mtime":1610203710086,"results":"35","hashOfConfig":"31"},{"size":2809,"mtime":1609257336242,"results":"36","hashOfConfig":"31"},{"size":787,"mtime":1610183452295,"results":"37","hashOfConfig":"31"},{"size":359,"mtime":1607757739271,"results":"38","hashOfConfig":"31"},{"size":1009,"mtime":1608044940771,"results":"39","hashOfConfig":"31"},{"size":430,"mtime":1608649541837,"results":"40","hashOfConfig":"31"},{"size":4153,"mtime":1608649993050,"results":"41","hashOfConfig":"31"},{"size":761,"mtime":1610192228946,"results":"42","hashOfConfig":"31"},{"size":476,"mtime":1608047674449,"results":"43","hashOfConfig":"31"},{"size":429,"mtime":1608649868864,"results":"44","hashOfConfig":"31"},{"size":491,"mtime":1610204135818,"results":"45","hashOfConfig":"31"},{"size":1247,"mtime":1608649959108,"results":"46","hashOfConfig":"31"},{"size":1031,"mtime":1608990596266,"results":"47","hashOfConfig":"31"},{"size":1469,"mtime":1608652027482,"results":"48","hashOfConfig":"31"},{"size":2952,"mtime":1610189413933,"results":"49","hashOfConfig":"31"},{"size":202,"mtime":1608479298543,"results":"50","hashOfConfig":"31"},{"size":390,"mtime":1608479563649,"results":"51","hashOfConfig":"31"},{"size":3075,"mtime":1610215173010,"results":"52","hashOfConfig":"31"},{"size":5164,"mtime":1610207497717,"results":"53","hashOfConfig":"31"},{"size":1580,"mtime":1610182699423,"results":"54","hashOfConfig":"31"},{"size":1640,"mtime":1610182496863,"results":"55","hashOfConfig":"31"},{"size":1353,"mtime":1610215094310,"results":"56","hashOfConfig":"31"},{"size":922,"mtime":1610210859947,"results":"57","hashOfConfig":"31"},{"size":4838,"mtime":1610213389624,"results":"58","hashOfConfig":"31"},{"size":735,"mtime":1610195050301,"results":"59","hashOfConfig":"31"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},"j32ste",{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"71","messages":"72","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"73","usedDeprecatedRules":"62"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"86","messages":"87","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"88","messages":"89","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"90","messages":"91","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"92","messages":"93","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"94","messages":"95","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"96","messages":"97","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"98","messages":"99","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"100","messages":"101","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"102","messages":"103","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"104","messages":"105","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"106","messages":"107","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"108","messages":"109","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"110","messages":"111","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"112","messages":"113","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"114","messages":"115","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"116","messages":"117","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"118","messages":"119","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"D:\\前端\\react基础架构\\bezier\\src\\index.tsx",[],["120","121"],"D:\\前端\\react基础架构\\bezier\\src\\reportWebVitals.ts",[],"D:\\前端\\react基础架构\\bezier\\src\\App.tsx",[],"D:\\前端\\react基础架构\\bezier\\src\\components\\ControlPoints\\index.tsx",["122"],"D:\\前端\\react基础架构\\bezier\\src\\models\\controlPoints.ts",[],"D:\\前端\\react基础架构\\bezier\\src\\components\\Stage\\index.tsx",["123","124"],"import React, { useMemo, useRef } from 'react';\r\nimport { of, concat } from 'rxjs';\r\nimport { tap, map, filter, withLatestFrom } from 'rxjs/operators';\r\nimport useResize from '../../hooks/useResize';\r\nimport useControlPoints from '../../models/controlPoints';\r\nimport useControlPlayer from '../../models/controlPlayer';\r\nimport useMulticast from '../../hooks/useMulticast';\r\nimport { drawCoordinates, drawBezierCurvePoint, getPoints$ } from './draws';\r\nimport { PADDING } from './contants';\r\nimport { IStageOptions, IDrawCoordinatesOptions, IDrawBezierCurveOptions } from './types';\r\n\r\nfunction Stage (props: Partial<{ className: string }>) {\r\n  const { className } = props;\r\n\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n\r\n  const { width, height } = useResize(containerRef.current);\r\n\r\n  const { points: controlPonitsOptions } = useControlPoints();\r\n  const { player: controlPlayer, setPlayer: setControlPonitsPlayer } = useControlPlayer();\r\n\r\n  const stageOptions: IStageOptions = useMemo(() => {\r\n    const _width = Math.floor(width);\r\n    const _height = Math.floor(height);\r\n    const axisXLength = Math.floor(_width - (2 * PADDING));\r\n    const axisYLength = Math.floor((1 / 3)  * (_height - (2 * PADDING)));\r\n    const originX = PADDING;\r\n    const originY = 2 * axisYLength + PADDING;\r\n\r\n    return {\r\n      x0: originX,\r\n      y0: originY,\r\n      xLen: axisXLength,\r\n      yLen: axisYLength,\r\n      stageW: _width,\r\n      stageH: _height,\r\n      stage: canvasRef\r\n    };\r\n  }, [width, height]);\r\n\r\n  const drawBezierCurve = ([stageOptions, controlPonits, controlPlayer]: IDrawBezierCurveOptions) => {\r\n    console.log('ddd', controlPlayer);\r\n    const clear$ = of<IDrawCoordinatesOptions>([stageOptions, controlPonits]).pipe(\r\n      tap(drawCoordinates)\r\n    );\r\n    const drawPoints$ = getPoints$(stageOptions, controlPonits, controlPlayer).pipe(\r\n      tap(drawBezierCurvePoint)\r\n    );\r\n    const draw$ = concat(clear$, drawPoints$);\r\n    draw$.subscribe({\r\n      complete: () => {\r\n        setControlPonitsPlayer({ ...controlPlayer, run: false });\r\n      },\r\n      error: () => {\r\n        setControlPonitsPlayer({ ...controlPlayer, run: false });\r\n      }\r\n    });\r\n  }\r\n\r\n  useMulticast<IDrawCoordinatesOptions>(\r\n    [drawCoordinates],\r\n    [stageOptions, controlPonitsOptions]\r\n  );\r\n\r\n  useMulticast<IDrawBezierCurveOptions>(\r\n    [drawBezierCurve],\r\n    [stageOptions, controlPonitsOptions, controlPlayer],\r\n    (dependency$) => {\r\n      return dependency$.pipe(\r\n        filter((dep) => dep[2].run)\r\n      );\r\n    }\r\n  );\r\n\r\n  return (\r\n    <div className={className} ref={containerRef}>\r\n      <canvas ref={canvasRef} width={stageOptions.stageW} height={stageOptions.stageH} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Stage;\r\n","D:\\前端\\react基础架构\\bezier\\src\\utils\\index.ts",[],"D:\\前端\\react基础架构\\bezier\\src\\utils\\toFixed.ts",[],"D:\\前端\\react基础架构\\bezier\\src\\components\\ControlPoints\\InputRange.tsx",[],"D:\\前端\\react基础架构\\bezier\\src\\components\\Stage\\contants.ts",[],"D:\\前端\\react基础架构\\bezier\\src\\components\\Stage\\draws.ts",[],"D:\\前端\\react基础架构\\bezier\\src\\utils\\calculateBezier.ts",[],"D:\\前端\\react基础架构\\bezier\\src\\utils\\getStyleCls.ts",[],"D:\\前端\\react基础架构\\bezier\\src\\models\\controlPlayer.ts",[],"D:\\前端\\react基础架构\\bezier\\src\\utils\\p2CubicBezier.ts",[],"D:\\前端\\react基础架构\\bezier\\src\\components\\Compare\\index.tsx",[],"D:\\前端\\react基础架构\\bezier\\src\\hooks\\useResize.ts",[],"D:\\前端\\react基础架构\\bezier\\src\\hooks\\useMulticast.ts",[],"D:\\前端\\react基础架构\\bezier\\src\\utils\\getMotion$.ts",[],"D:\\前端\\react基础架构\\bezier\\src\\utils\\getCtxByStage.ts",[],"D:\\前端\\react基础架构\\bezier\\src\\utils\\drawPoint.ts",[],"D:\\前端\\react基础架构\\bezier\\src\\components\\Display\\index.tsx",["125","126","127","128"],"D:\\前端\\react基础架构\\bezier\\src\\Canvas\\index.ts",[],"D:\\前端\\react基础架构\\bezier\\src\\Canvas\\Shape\\Circle.ts",[],"D:\\前端\\react基础架构\\bezier\\src\\Canvas\\Shape\\Rectangle.ts",[],"D:\\前端\\react基础架构\\bezier\\src\\utils\\cubicBezier2p.ts",[],"D:\\前端\\react基础架构\\bezier\\src\\Canvas\\utils\\Movement.ts",[],"D:\\前端\\react基础架构\\bezier\\src\\Canvas\\utils\\getMovements$.ts",["129"],"D:\\前端\\react基础架构\\bezier\\src\\Canvas\\utils\\getAbsolutePosition.ts",[],{"ruleId":"130","replacedBy":"131"},{"ruleId":"132","replacedBy":"133"},{"ruleId":"134","severity":1,"message":"135","line":31,"column":11,"nodeType":"136","messageId":"137","endLine":31,"endColumn":24},{"ruleId":"134","severity":1,"message":"138","line":3,"column":15,"nodeType":"136","messageId":"137","endLine":3,"endColumn":18},{"ruleId":"134","severity":1,"message":"139","line":3,"column":28,"nodeType":"136","messageId":"137","endLine":3,"endColumn":42},{"ruleId":"134","severity":1,"message":"140","line":1,"column":28,"nodeType":"136","messageId":"137","endLine":1,"endColumn":35},{"ruleId":"134","severity":1,"message":"141","line":1,"column":45,"nodeType":"136","messageId":"137","endLine":1,"endColumn":53},{"ruleId":"134","severity":1,"message":"142","line":13,"column":10,"nodeType":"136","messageId":"137","endLine":13,"endColumn":32},{"ruleId":"134","severity":1,"message":"143","line":14,"column":10,"nodeType":"136","messageId":"137","endLine":14,"endColumn":16},{"ruleId":"134","severity":1,"message":"144","line":12,"column":71,"nodeType":"136","messageId":"137","endLine":12,"endColumn":81},"no-native-reassign",["145"],"no-negated-in-lhs",["146"],"@typescript-eslint/no-unused-vars","'initialPlayer' is assigned a value but never used.","Identifier","unusedVar","'map' is defined but never used.","'withLatestFrom' is defined but never used.","'useMemo' is defined but never used.","'useState' is defined but never used.","'IDrawBallMotionOptions' is defined but never used.","'IPoint' is defined but never used.","'ShapeState' is defined but never used.","no-global-assign","no-unsafe-negation"]